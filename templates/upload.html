{% extends "base.html" %}
{% block title %}Q-Box{% endblock %}


{% block content%}
<div class="w3-container" style="margin-top: 100px;">
    <h2>Upload a File</h2>
    <form action = "/success" method = "post" enctype="multipart/form-data">   
        <input type="file" name="file" />   
        <input type = "submit" value="Upload">   
    </form>   
</div>

<div class="w3-container w3-margin-top" id="status"></div>
{% block scripts %}
<script>
    document.getElementById('uploadForm').addEventListener('submit', function(event) {
        event.preventDefault();
        var formData = new FormData();
        var fileInput = document.getElementById('fileInput');
        var file = fileInput.files[0];
        formData.append('file', file);

        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/upload', true);
        xhr.onload = function() {
            if (xhr.status === 200) {
                document.getElementById('status').innerHTML = '<div class="w3-panel w3-green">File uploaded successfully!</div>';
            } else {
                document.getElementById('status').innerHTML = '<div class="w3-panel w3-red">Error uploading file.</div>';
            }
        };
        xhr.send(formData);
    });
</script>
{% endblock %}
{% endblock %}